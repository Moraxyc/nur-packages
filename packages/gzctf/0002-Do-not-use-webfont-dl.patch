From 07a737d5d5cc77eaea71162414b0221158b40b96 Mon Sep 17 00:00:00 2001
From: Moraxyc <i@qaq.li>
Date: Fri, 5 Dec 2025 20:22:13 +0800
Subject: [PATCH 2/2] Do not use webfont-dl

---
 package.json    |  2 ++
 pnpm-lock.yaml  | 16 ++++++++++++++++
 src/main.tsx    |  2 ++
 vite.config.mts | 10 ----------
 4 files changed, 20 insertions(+), 10 deletions(-)

diff --git a/package.json b/package.json
index f519adf..e80556f 100644
--- a/package.json
+++ b/package.json
@@ -15,6 +15,8 @@
   "dependencies": {
     "@babel/core": "^7.28.5",
     "@emotion/react": "^11.14.0",
+    "@fontsource-variable/jetbrains-mono": "^5.2.8",
+    "@fontsource-variable/lexend": "^5.2.11",
     "@mantine/carousel": "^8.3.9",
     "@mantine/colors-generator": "^8.3.9",
     "@mantine/core": "^8.3.9",
diff --git a/pnpm-lock.yaml b/pnpm-lock.yaml
index 83cac08..af0885c 100644
--- a/pnpm-lock.yaml
+++ b/pnpm-lock.yaml
@@ -18,6 +18,12 @@ importers:
       '@emotion/react':
         specifier: ^11.14.0
         version: 11.14.0(@types/react@19.2.7)(react@19.2.1)
+      '@fontsource-variable/jetbrains-mono':
+        specifier: ^5.2.8
+        version: 5.2.8
+      '@fontsource-variable/lexend':
+        specifier: ^5.2.11
+        version: 5.2.11
       '@mantine/carousel':
         specifier: ^8.3.9
         version: 8.3.9(@mantine/core@8.3.9(@mantine/hooks@8.3.9(react@19.2.1))(@types/react@19.2.7)(react-dom@19.2.1(react@19.2.1))(react@19.2.1))(@mantine/hooks@8.3.9(react@19.2.1))(embla-carousel-react@8.6.0(react@19.2.1))(embla-carousel@8.6.0)(react-dom@19.2.1(react@19.2.1))(react@19.2.1)
@@ -572,6 +578,12 @@ packages:
   '@floating-ui/utils@0.2.10':
     resolution: {integrity: sha512-aGTxbpbg8/b5JfU1HXSrbH3wXZuLPJcNEcZQFMxLs3oSzgtVu6nFPkbbGGUvBcUjKV2YyB9Wxxabo+HEH9tcRQ==}
 
+  '@fontsource-variable/jetbrains-mono@5.2.8':
+    resolution: {integrity: sha512-WBA9elru6Jdp5df2mES55wuOO0WIrn3kpXnI4+W2ek5u3ZgLS9XS4gmIlcQhiZOWEKl95meYdvK7xI+ETLCq/Q==}
+
+  '@fontsource-variable/lexend@5.2.11':
+    resolution: {integrity: sha512-0hgEQ4O7Nh8fxL/WWmspJf0BErbocRkZwtLRGey/V4mUUqxfF7QUwqhcdzwpjom3NYCniY4uzQ5wYD7r9/92tQ==}
+
   '@jridgewell/gen-mapping@0.3.13':
     resolution: {integrity: sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==}
 
@@ -2932,6 +2944,10 @@ snapshots:
 
   '@floating-ui/utils@0.2.10': {}
 
+  '@fontsource-variable/jetbrains-mono@5.2.8': {}
+
+  '@fontsource-variable/lexend@5.2.11': {}
+
   '@jridgewell/gen-mapping@0.3.13':
     dependencies:
       '@jridgewell/sourcemap-codec': 1.5.5
diff --git a/src/main.tsx b/src/main.tsx
index 97a0ecd..442d606 100644
--- a/src/main.tsx
+++ b/src/main.tsx
@@ -7,6 +7,8 @@ import { initReactI18next } from 'react-i18next'
 import { BrowserRouter } from 'react-router'
 import manifest from 'virtual:i18n-manifest'
 import { convertLanguage, LanguageProvider } from '@Utils/I18n'
+import '@fontsource-variable/jetbrains-mono'
+import '@fontsource-variable/lexend'
 
 i18n
   .use(LanguageDetector)
diff --git a/vite.config.mts b/vite.config.mts
index 017ab41..2629b40 100644
--- a/vite.config.mts
+++ b/vite.config.mts
@@ -4,7 +4,6 @@ import { defineConfig, loadEnv } from 'vite'
 import banner from 'vite-plugin-banner'
 import { optimizeCssModules } from 'vite-plugin-optimize-css-modules'
 import Pages from 'vite-plugin-pages'
-import webfontDownload from 'vite-plugin-webfont-dl'
 import tsconfigPaths from 'vite-tsconfig-paths'
 import { fetchContributors } from './plugins/vite-fetch-contributors'
 import { i18nVirtualManifest } from './plugins/vite-i18n-virtual-manifest'
@@ -58,15 +57,6 @@ export default defineConfig(({ mode }) => {
       react(),
       banner(BANNER),
       tsconfigPaths(),
-      webfontDownload(
-        [
-          'https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Lexend:wght@100..900&display=swap',
-        ],
-        {
-          injectAsStyleTag: false,
-          async: false,
-        }
-      ),
       Pages({ dirs: [{ dir: './src/pages', baseRoute: '', filePattern: '**/*.tsx' }] }),
       i18nVirtualManifest(),
       fetchContributors(),
-- 
2.51.2

